# LibChat - æ™ºèƒ½ä»£ç é—®ç­”ç³»ç»Ÿ
(2025/7/2æ›´æ–°ï¼šå¢åŠ äº†å›¾å¢å¼ºRAGï¼Œå¢åŠ webç•Œé¢ï¼Œå¢åŠ å¯¹gitä»“åº“å’Œæœ¬åœ°ä»£ç åŒ…çš„æ”¯æŒï¼Œå¢åŠ ä»¥çŸ¥è¯†å›¾è°±ä¸ºåŸºç¡€çš„ç›¸å…³ä»£ç æŸ¥çœ‹åŠŸèƒ½ï¼‰

## é¡¹ç›®ç®€ä»‹

LibChat æ˜¯ä¸€ä¸ªåŸºäº GraphRAG æŠ€æœ¯çš„æœ¬åœ°ä»£ç åº“æ™ºèƒ½é—®ç­”ç³»ç»Ÿã€‚

## ğŸš€ æ ¸å¿ƒåŠŸèƒ½

- **ä»£ç åˆ†æ**: åŸºäºASTçš„ç»“æ„åŒ–ä»£ç è§£æï¼Œæ”¯æŒå‡½æ•°ã€ç±»ã€å˜é‡ç­‰ä»£ç å…ƒç´ çš„ç²¾ç¡®æå–
- **å¤šæ¨¡æ€æ£€ç´¢**: ç»“åˆå‘é‡æ£€ç´¢ã€BM25å…³é”®è¯åŒ¹é…å’ŒçŸ¥è¯†å›¾è°±çš„æ··åˆæ£€ç´¢ç­–ç•¥
- **çŸ¥è¯†å›¾è°±æ„å»º**: è‡ªåŠ¨æ„å»ºä»£ç é—´çš„ä¾èµ–å…³ç³»å›¾ï¼Œæ”¯æŒå¯è§†åŒ–å±•ç¤º
- **å¤šè¯­è¨€æ”¯æŒ**: æ”¯æŒPythonã€JavaScriptã€TypeScriptã€Javaã€C++ç­‰å¤šç§ç¼–ç¨‹è¯­è¨€
- **é‡æ’åº**: ä½¿ç”¨CrossEncoderæ¨¡å‹å¯¹æ£€ç´¢ç»“æœè¿›è¡Œé‡æ’åºï¼Œæé«˜ç­”æ¡ˆè´¨é‡
- **GitHubé›†æˆ**: æ”¯æŒç›´æ¥è¾“å…¥GitHubä»“åº“URLï¼Œè‡ªåŠ¨å…‹éš†å’Œåˆ†ææ•´ä¸ªä»£ç åº“
- **Webç•Œé¢**: æä¾›ç›´è§‚çš„Webç•Œé¢ï¼Œæ”¯æŒå®æ—¶æŸ¥è¯¢å’ŒçŸ¥è¯†å›¾è°±å¯è§†åŒ–
- **å‘½ä»¤è¡Œå·¥å…·**: æ”¯æŒæ‰¹é‡å¤„ç†å’Œè‡ªåŠ¨åŒ–é›†æˆ


## æŠ€æœ¯æ¶æ„

### æ ¸å¿ƒæ¨¡å—

#### 1. ä»£ç åˆ†å—å™¨ (Chunker)
- **ASTåˆ†å—å™¨** (`ast_chunker.py`)ï¼šåŸºäºæŠ½è±¡è¯­æ³•æ ‘çš„Pythonä»£ç åˆ†å—
- **å¤šè¯­è¨€åˆ†å—å™¨** (`multi_language_chunker.py`)ï¼šæ”¯æŒå¤šç§ç¼–ç¨‹è¯­è¨€çš„æ™ºèƒ½åˆ†å—
- ä½¿ç”¨ Tree-sitter è¿›è¡Œç²¾ç¡®çš„è¯­æ³•åˆ†æ
- æ”¯æŒå‡½æ•°ã€ç±»ã€æ–¹æ³•çº§åˆ«çš„ä»£ç å—æå–

#### 2. ç´¢å¼•å™¨ (Indexer)
- **ä¿®å¤ç´¢å¼•å™¨** (`fixed_indexer.py`)ï¼šæ”¹è¿›çš„å‘é‡ç´¢å¼•æ„å»ºå™¨
- æ”¯æŒ FAISS å‘é‡å­˜å‚¨å’ŒæŒä¹…åŒ–
- é›†æˆå¤šç§åµŒå…¥æ¨¡å‹ï¼ˆOpenAI, BGEç³»åˆ—ï¼‰
- æä¾›ç´¢å¼•ç®¡ç†å’Œé‡å»ºåŠŸèƒ½

#### 3. æ£€ç´¢å™¨ (Retriever)
- **GraphRAGæ£€ç´¢å™¨** (`graph_retriever.py`)ï¼šå›¾å¢å¼ºæ£€ç´¢å®ç°
- ç»“åˆå‘é‡æ£€ç´¢å’Œå›¾éå†æŠ€æœ¯
- ä¸¤é˜¶æ®µæ£€ç´¢ç­–ç•¥ï¼šå…¥å£ç‚¹å®šä½ + ä¸Šä¸‹æ–‡æ‰©å±•
- æ”¯æŒå¯é…ç½®çš„æ‰©å±•æ·±åº¦

#### 4. é‡æ’åºå™¨ (Reranker)
- **å¥å­å˜æ¢å™¨é‡æ’åºå™¨** (`reranker.py`)ï¼šåŸºäºCrossEncoderçš„ç»“æœé‡æ’
- ä½¿ç”¨ BGE-reranker æ¨¡å‹æå‡æ£€ç´¢ç²¾åº¦
- æ”¯æŒæ‰¹é‡å¤„ç†å’ŒGPUåŠ é€Ÿ

#### 5. æºç æ£€æŸ¥å™¨ (Inspector)
- **åŒ…æ£€æŸ¥å™¨** (`inspector.py`)ï¼šPythonåŒ…æºç å®šä½å’Œæ”¶é›†
- æ”¯æŒå·²å®‰è£…åŒ…å’Œæœ¬åœ°é¡¹ç›®çš„æºç å‘ç°
- æ™ºèƒ½å¤„ç†åŒ…ç»“æ„å’Œæ¨¡å—ä¾èµ–

## å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒå‡†å¤‡

1. **Python ç¯å¢ƒ**
   ```bash
   # ç¡®ä¿ Python 3.8+
   python --version
   ```

2. **å®‰è£…ä¾èµ–**
   ```bash
   pip install -r requirements.txt
   ```

3. **é…ç½®ç¯å¢ƒå˜é‡**
   ```bash
   # è®¾ç½® OpenAI API Keyï¼ˆç”¨äºåµŒå…¥å’Œç”Ÿæˆï¼‰
   export OPENAI_API_KEY="your-api-key-here"
   
   # æˆ–è€…åœ¨ .env æ–‡ä»¶ä¸­é…ç½®
   echo "OPENAI_API_KEY=your-api-key-here" > .env
   ```

### æ„å»ºçŸ¥è¯†åº“

ä½¿ç”¨å‘½ä»¤è¡Œå·¥å…·æ„å»ºä»£ç çŸ¥è¯†åº“ï¼š

```bash
# ä¸ºæœ¬åœ°é¡¹ç›®æ„å»ºç´¢å¼•
python main.py build /path/to/your/project

# ä¸ºå·²å®‰è£…çš„ Python åŒ…æ„å»ºç´¢å¼•
python main.py build --package numpy

# ä½¿ç”¨è‡ªå®šä¹‰åµŒå…¥æ¨¡å‹
python main.py build /path/to/project --embedding-model BAAI/bge-small-en-v1.5
```

### ğŸ“š æ„å»ºçŸ¥è¯†åº“

#### Pythonåº“åˆ†æ
```bash
# æ„å»ºæŒ‡å®šPythonåº“çš„çŸ¥è¯†åº“
python main.py build numpy

# æŒ‡å®šè‡ªå®šä¹‰ç´¢å¼•åç§°
python main.py build requests --index-name my-requests-index
```

#### GitHubä»“åº“åˆ†æ
```bash
# ä»GitHubä»“åº“æ„å»ºçŸ¥è¯†åº“
python main.py build-github https://github.com/user/repo

# æŒ‡å®šè‡ªå®šä¹‰ç´¢å¼•åç§°
python main.py build-github https://github.com/fastapi/fastapi --index-name fastapi-analysis

# è®¾ç½®æœ€å¤§ä»“åº“å¤§å°é™åˆ¶ï¼ˆMBï¼‰
python main.py build-github https://github.com/user/repo --max-size 100
```

### å¯åŠ¨Webç•Œé¢

```bash
# å¯åŠ¨ Web åº”ç”¨
python run_web.py

# æˆ–è€…ç›´æ¥è¿è¡Œ
python run.py
```

è®¿é—® `http://localhost:5000` å¼€å§‹ä½¿ç”¨Webç•Œé¢ã€‚

## ä½¿ç”¨æŒ‡å—

### å‘½ä»¤è¡Œæ¨¡å¼

```bash
# æ„å»ºç´¢å¼•
python main.py build /path/to/your/code

# å¼€å§‹é—®ç­”
python main.py ask "å¦‚ä½•ä½¿ç”¨è¿™ä¸ªåº“çš„ä¸»è¦åŠŸèƒ½ï¼Ÿ"
python main.py ask "è¿™ä¸ªé¡¹ç›®ä¸­æœ‰å“ªäº›é‡è¦çš„ç±»ï¼Ÿ"
python main.py ask "è§£é‡Šä¸€ä¸‹æ•°æ®å¤„ç†çš„æµç¨‹"
```

### Webç•Œé¢åŠŸèƒ½

#### å·¦ä¾§é¢æ¿ - æ™ºèƒ½é—®ç­”
- **é—®é¢˜è¾“å…¥**ï¼šæ”¯æŒè‡ªç„¶è¯­è¨€æŸ¥è¯¢
- **å†å²è®°å½•**ï¼šä¿å­˜é—®ç­”å†å²
- **ç´¢å¼•ç®¡ç†**ï¼šæŸ¥çœ‹å’Œç®¡ç†å·²æ„å»ºçš„ç´¢å¼•
- **åº“å®‰è£…**ï¼šç›´æ¥å®‰è£…PythonåŒ…å¹¶æ„å»ºç´¢å¼•

#### å³ä¾§é¢æ¿ - çŸ¥è¯†å›¾è°±å¯è§†åŒ–
- **äº¤äº’å¼å›¾è°±**ï¼šå¯ç¼©æ”¾ã€æ‹–æ‹½çš„çŸ¥è¯†å›¾è°±
- **èŠ‚ç‚¹è¯¦æƒ…**ï¼šç‚¹å‡»èŠ‚ç‚¹æŸ¥çœ‹ä»£ç è¯¦æƒ…
- **å…³ç³»å±•ç¤º**ï¼šæ˜¾ç¤ºä»£ç é—´çš„è°ƒç”¨å’Œä¾èµ–å…³ç³»
- **æºç æŸ¥çœ‹**ï¼šç›´æ¥æŸ¥çœ‹ç›¸å…³æºä»£ç 

## æŠ€æœ¯æ ˆ

### æ ¸å¿ƒæŠ€æœ¯
- **GraphRAG**ï¼šå›¾å¢å¼ºæ£€ç´¢ç”ŸæˆæŠ€æœ¯
- **LlamaIndex**ï¼šæ–‡æ¡£ç´¢å¼•å’Œæ£€ç´¢æ¡†æ¶
- **FAISS**ï¼šé«˜æ•ˆå‘é‡ç›¸ä¼¼åº¦æœç´¢
- **Tree-sitter**ï¼šå¤šè¯­è¨€ä»£ç è§£æ
- **NetworkX**ï¼šå›¾æ•°æ®ç»“æ„å’Œç®—æ³•
- **Sentence-Transformers**ï¼šæ–‡æœ¬åµŒå…¥å’Œé‡æ’åº

### å‰ç«¯æŠ€æœ¯
- **Flask**ï¼šWebæ¡†æ¶
- **D3.js**ï¼šæ•°æ®å¯è§†åŒ–
- **Bootstrap**ï¼šå“åº”å¼UIæ¡†æ¶
- **jQuery**ï¼šå‰ç«¯äº¤äº’

### AIæ¨¡å‹æ”¯æŒ
- **OpenAI Embeddings**ï¼štext-embedding-ada-002
- **BGEç³»åˆ—æ¨¡å‹**ï¼šbge-small/base/large-en-v1.5
- **BGEé‡æ’åºæ¨¡å‹**ï¼šbge-reranker-large
- **å¤šè¯­è¨€æ”¯æŒ**ï¼šbge-m3ï¼ˆå¤šè¯­è¨€åµŒå…¥ï¼‰

## é¡¹ç›®ç»“æ„

```
LibChat/
â”œâ”€â”€ .gitignore                   # Gitå¿½ç•¥æ–‡ä»¶
â”œâ”€â”€ README.md                    # é¡¹ç›®æ–‡æ¡£
â”œâ”€â”€ app.py                       # Flaskåº”ç”¨
â”œâ”€â”€ github_cache/                # GitHubä»“åº“ç¼“å­˜ç›®å½•
â”œâ”€â”€ main.py                      # å‘½ä»¤è¡Œå…¥å£
â”œâ”€â”€ requirements.txt             # ä¾èµ–åˆ—è¡¨
â”œâ”€â”€ run.py                       # ç®€å•å¯åŠ¨è„šæœ¬
â”œâ”€â”€ run_web.py                   # Webåº”ç”¨å¯åŠ¨è„šæœ¬
â”œâ”€â”€ src/                         # æ ¸å¿ƒæºç ç›®å½•
â”‚   â”œâ”€â”€ __init__.py              # srcæ¨¡å—åˆå§‹åŒ–æ–‡ä»¶
â”‚   â”œâ”€â”€ chunker/                 # ä»£ç åˆ†å—æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ __init__.py          # chunkeræ¨¡å—åˆå§‹åŒ–æ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ ast_chunker.py       # ASTåˆ†å—å™¨
â”‚   â”‚   â””â”€â”€ multi_language_chunker.py  # å¤šè¯­è¨€åˆ†å—å™¨
â”‚   â”œâ”€â”€ data_ingestion/          # æ•°æ®æ‘„å–æ¨¡å—
â”‚   â”œâ”€â”€ generation/              # ç”Ÿæˆæ¨¡å—
â”‚   â”‚   â””â”€â”€ __init__.py          # generationæ¨¡å—åˆå§‹åŒ–æ–‡ä»¶
â”‚   â”œâ”€â”€ github_crawler/          # GitHubçˆ¬è™«æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ __init__.py          # github_crawleræ¨¡å—åˆå§‹åŒ–æ–‡ä»¶
â”‚   â”‚   â””â”€â”€ github_crawler.py    # GitHubçˆ¬è™«å®ç°
â”‚   â”œâ”€â”€ indexing/                # ç´¢å¼•æ„å»ºæ¨¡å—
â”‚   â”‚   â”œâ”€â”€ __init__.py          # indexingæ¨¡å—åˆå§‹åŒ–æ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ fixed_indexer.py     # ä¿®å¤ç´¢å¼•å™¨
â”‚   â”‚   â””â”€â”€ indexer.py           # ç´¢å¼•å™¨å®ç°
â”‚   â”œâ”€â”€ pipeline/                # ç®¡é“æ¨¡å—
â”‚   â”‚   â””â”€â”€ __init__.py          # pipelineæ¨¡å—åˆå§‹åŒ–æ–‡ä»¶
â”‚   â”œâ”€â”€ reranking/               # é‡æ’åºæ¨¡å—
â”‚   â”‚   â”œâ”€â”€ __init__.py          # rerankingæ¨¡å—åˆå§‹åŒ–æ–‡ä»¶
â”‚   â”‚   â””â”€â”€ reranker.py          # é‡æ’åºå™¨
â”‚   â”œâ”€â”€ retrieval/               # æ£€ç´¢æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ __init__.py          # retrievalæ¨¡å—åˆå§‹åŒ–æ–‡ä»¶
â”‚   â”‚   â””â”€â”€ graph_retriever.py   # GraphRAGæ£€ç´¢å™¨
â”‚   â”œâ”€â”€ source_inspector/        # æºç æ£€æŸ¥æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ __init__.py          # source_inspectoræ¨¡å—åˆå§‹åŒ–æ–‡ä»¶
â”‚   â”‚   â””â”€â”€ inspector.py         # åŒ…æ£€æŸ¥å™¨
â”‚   â””â”€â”€ utils/                   # å·¥å…·æ¨¡å—
â”‚       â””â”€â”€ __init__.py          # utilsæ¨¡å—åˆå§‹åŒ–æ–‡ä»¶
â”œâ”€â”€ static/                      # é™æ€èµ„æº
â”‚   â””â”€â”€ css/                     # æ ·å¼æ–‡ä»¶
â”œâ”€â”€ temp/                        # ä¸´æ—¶æ–‡ä»¶ç›®å½•
â”œâ”€â”€ templates/                   # Webæ¨¡æ¿
â”‚   â””â”€â”€ index.html               # ä¸»é¡µé¢æ¨¡æ¿
â”œâ”€â”€ test_encoding_index/         # æµ‹è¯•ç¼–ç ç´¢å¼•ç›®å½•
â””â”€â”€ uploads/                     # ä¸Šä¼ æ–‡ä»¶ç›®å½•
```




## è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…ã€‚
